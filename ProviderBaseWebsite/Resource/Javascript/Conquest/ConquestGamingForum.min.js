$(function(){var n=ProviderBase.GetFirstValue();switch(n.toLowerCase()){case"":default:Forum.GetForumIndex();break;case"area":Forum.GetForumArea();break;case"group":Forum.GetForumGroup();break;case"thread":Forum.GetForumThread();break;case"threadnew":Forum.GetForumThreadNew()}}),function(n,t){function i(){t("#NewForumThreadMessage").length>0&&t("#NewForumThreadMessage").ajaxForm(options={beforeSerialize:function(){CKEDITOR.instances.ForumThreadMessage.updateElement();t("#ForumThreadMessage").val(ProviderBase.HtmlEncode(t("#ForumThreadMessage").val()))},beforeSubmit:function(){ProviderBase.ClearMessage("ForumThreadNewMessage")},success:function(n){n.Status==1?n.Action.toLowerCase()=="submit"?Forum.GetForumThread():n.Action.toLowerCase()=="preview"&&(n.Data.length>0&&n.Data[0].length>0?t("#ForumThreadMessagePreview").html(n.Data[0]):alert(n.Message)):ProviderBase.ShowFailMessage("ForumThreadNewMessage",n.Message)},dataType:"json"})}function f(){t("#NewForumThread").length>0&&t("#NewForumThread").ajaxForm(options={beforeSerialize:function(){CKEDITOR.instances.ForumThreadMessage.updateElement();t("#ForumThreadMessage").val(ProviderBase.HtmlEncode(t("#ForumThreadMessage").val()))},beforeSubmit:function(){ProviderBase.ClearMessage("ForumThreadNewMessage")},success:function(n){n.Status==1?n.Action.toLowerCase()=="submit"?n.Data.length>0&&n.Data[0].length>0?location.href="/Forum/Thread?id="+n.Data[0]:alert(n.Message):n.Action.toLowerCase()=="preview"&&(n.Data.length>0&&n.Data[0].length>0?t("#ForumThreadMessagePreview").html(n.Data[0]):alert(n.Message)):ProviderBase.ShowFailMessage("ForumThreadNewMessage",n.Message)},dataType:"json"})}function r(){t("#ForumAreaPaging").length>0&&t("#ForumAreaPaging").ajaxForm(options={success:function(n){ProviderBaseAjax.AjaxResponse(n,"ForumRepeat");t(".forum-border").last().remove();r()},dataType:"json"})}function u(){t("#ForumThreadPaging").length>0&&t("#ForumThreadPaging").ajaxForm(options={success:function(n){ProviderBaseAjax.AjaxResponse(n,"ForumRepeat");t(".forum-border").last().remove();t("#ForumThreadMessage").length>0&&(CKEDITOR.replace("ForumThreadMessage",{customConfig:"/Resource/Javascript/ProviderBase/ProviderBase.CkeditorConfig.js"}),i());u()},dataType:"json"})}Forum.GetForumIndex=function(){if(t("#ForumRepeat").length>0)ProviderBaseAjax.AjaxRequest("/WebControl.fh?Command=GetForumIndex",function(n){ProviderBaseAjax.AjaxResponse(n,"ForumRepeat");t(".forum-border").last().remove()},[],"ForumRepeat")};Forum.GetForumArea=function(){if(t("#ForumRepeat").length>0){var n=[];n.push(new ProviderBaseAjax.RequestData("ID",ProviderBase.GetUrlParameter("ID")));n.push(new ProviderBaseAjax.RequestData("PageSize","20"));ProviderBaseAjax.AjaxRequest("/WebControl.fh?Command=GetForumArea",function(n){ProviderBaseAjax.AjaxResponse(n,"ForumRepeat");t(".forum-border").last().remove();r()},n,"ForumRepeat")}};Forum.GetForumGroup=function(){if(t("#ForumRepeat").length>0){var n=[];n.push(new ProviderBaseAjax.RequestData("ID",ProviderBase.GetUrlParameter("ID")));ProviderBaseAjax.AjaxRequest("/WebControl.fh?Command=GetForumGroup",function(n){ProviderBaseAjax.AjaxResponse(n,"ForumRepeat");t(".forum-border").last().remove()},n,"ForumRepeat")}};Forum.GetForumThread=function(){if(t("#ForumRepeat").length>0){var n=[];n.push(new ProviderBaseAjax.RequestData("ID",ProviderBase.GetUrlParameter("ID")));n.push(new ProviderBaseAjax.RequestData("PageSize","10"));ProviderBaseAjax.AjaxRequest("/WebControl.fh?Command=GetForumThread",function(n){ProviderBaseAjax.AjaxResponse(n,"ForumRepeat");t(".forum-border").last().remove();t("#ForumThreadMessage").length>0&&(CKEDITOR.replace("ForumThreadMessage",{customConfig:"/Resource/Javascript/ProviderBase/ProviderBase.CkeditorConfig.js"}),i());u()},n,"ForumRepeat")}};Forum.GetForumThreadNew=function(){if(t("#ForumRepeat").length>0){var n=[];n.push(new ProviderBaseAjax.RequestData("ID",ProviderBase.GetUrlParameter("ID")));ProviderBaseAjax.AjaxRequest("/WebControl.fh?Command=GetForumThreadNew",function(n){ProviderBaseAjax.AjaxResponse(n,"ForumRepeat");t(".forum-border").last().remove();t("#ForumThreadMessage").length>0&&(CKEDITOR.replace("ForumThreadMessage",{customConfig:"/Resource/Javascript/ProviderBase/ProviderBase.CkeditorConfig.js"}),f())},n,"ForumRepeat")}}}(window.Forum=window.Forum||{},jQuery);